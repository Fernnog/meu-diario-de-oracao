<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meus Alvos de Ora√ß√£o</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Favicon (opcional, substitua pelo seu) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéØ</text></svg>">
</head>
<body>

    <div class="top-bar">
        <span class="ultimo-backup" id="ultimoBackupInfo">√öltimo backup: Carregando...</span>
    </div>

    <div class="logo-container">
        <img src="logo.png" alt="Logo Meus Alvos de Ora√ß√£o" class="logo">
    </div>

    <h1 class="main-title">Meus Alvos de Ora√ß√£o</h1>
    <hr class="title-separator">

    <!-- Se√ß√£o de Autentica√ß√£o -->
    <div class="auth-section">
        <div id="emailPasswordAuthForm" class="auth-form">
            <h3>Login / Cadastro</h3>
            <input type="email" id="email" placeholder="Seu E-mail" required>
            <input type="password" id="password" placeholder="Sua Senha" required>
            <div class="auth-buttons">
                <button id="btnEmailSignIn" class="auth-btn">Entrar</button>
                <button id="btnEmailSignUp" class="auth-btn">Cadastrar</button>
            </div>
            <div class="forgot-password-container">
                <button id="btnForgotPassword" class="forgot-password-btn">Esqueci minha senha</button>
            </div>
            <div id="passwordResetMessage" class="password-reset-message" style="display:none;"></div>
        </div>
        <div class="auth-status-container" style="display:none;">
            <p id="authStatus" class="auth-status">N√£o autenticado</p>
            <button id="btnLogout" class="auth-btn" style="display:none;">Sair</button>
        </div>
    </div>
    <hr class="menu-separator">

    <!-- Menu Principal de Navega√ß√£o -->
    <div class="main-menu">
        <button id="backToMainButton" class="btn">P√°gina Inicial</button>
        <button id="addNewTargetButton" class="btn">Novo Alvo</button>
        <button id="viewAllTargetsButton" class="btn">Ver Todos Alvos</button>
        <button id="viewArchivedButton" class="btn archived-resolved">Ver Arquivados</button>
        <button id="viewResolvedButton" class="btn archived-resolved">Ver Respondidos</button>
    </div>

    <!-- Menu Secund√°rio de A√ß√µes -->
    <div class="main-menu" id="secondaryMenu">
        <button id="viewReportButton" class="btn action-btn">Relat√≥rio de Perseveran√ßa</button>
        <button id="generateViewButton" class="btn generate-view action-btn">Gerar Visualiza√ß√£o Atual</button>
        <button id="generateCategoryViewButton" class="btn generate-view action-btn">Gerar Visualiza√ß√£o por Categoria</button>
        <button id="viewResolvedViewButton" class="btn generate-view archived-resolved action-btn">Visualizar Respondidos (Per√≠odo)</button>
    </div>
    <hr class="menu-separator dark">


    <!-- Se√ß√£o de Alvos Di√°rios e Perseveran√ßa (P√°gina Inicial) -->
    <div id="dailySection" class="daily-section" style="display:none;">
        <h2>Alvos de Ora√ß√£o do Dia</h2>
        <div id="dailyVerses" class="daily-verses">Carregando vers√≠culo...</div>

        <div class="daily-buttons-container main-menu">
            <button id="refreshDaily" class="btn daily-action-btn">Atualizar Lista do Dia</button>
            <button id="copyDaily" class="btn daily-action-btn">Copiar Pendentes</button>
            <button id="addManualTargetButton" class="btn daily-action-btn">Adicionar Alvo Manualmente</button>
            <button id="viewDaily" class="btn daily-view">Visualizar Detalhes do Dia</button>
        </div>

        <div id="dailyTargets">
            <p>Carregando alvos do dia...</p>
        </div>
        <hr class="section-separator">
    </div>

    <!-- Se√ß√£o Quadro Semanal (integrada √† P√°gina Inicial) -->
    <div id="weeklyPerseveranceChart" class="weekly-perseverance-chart perseverance-section" style="display:none;">
        <div class="weekly-header">
            <h3>Intera√ß√µes da Semana (Clique "Orei!")</h3>
        </div>
        <div class="days-container">
            <div class="day">
                <span class="day-name">Dom</span>
                <span class="day-tick" id="day-0"></span>
            </div>
            <div class="day">
                <span class="day-name">Seg</span>
                <span class="day-tick" id="day-1"></span>
            </div>
            <div class="day">
                <span class="day-name">Ter</span>
                <span class="day-tick" id="day-2"></span>
            </div>
            <div class="day">
                <span class="day-name">Qua</span>
                <span class="day-tick" id="day-3"></span>
            </div>
            <div class="day">
                <span class="day-name">Qui</span>
                <span class="day-tick" id="day-4"></span>
            </div>
            <div class="day">
                <span class="day-name">Sex</span>
                <span class="day-tick" id="day-5"></span>
            </div>
            <div class="day">
                <span class="day-name">S√°b</span>
                <span class="day-tick" id="day-6"></span>
            </div>
        </div>
    </div>

    <!-- Se√ß√£o Barra de Perseveran√ßa (integrada √† P√°gina Inicial) -->
    <div id="perseveranceSection" class="perseverance-section" style="display:none;">
        <div class="perseverance-header">
            <h2>Sua Perseveran√ßa (Dias Consecutivos)</h2>
        </div>
        <div class="perseverance-bar-container">
            <!-- CONTAINER PARA OS MARCADORES DE ETAPA (ACIMA DA BARRA) -->
            <div class="milestone-markers-container">
                <span id="milestoneSeed" class="milestone-marker">üå±</span>
                <span id="milestoneFlame" class="milestone-marker">üî•</span>
                <span id="milestoneStar" class="milestone-marker">üåü</span>
            </div>

            <!-- BARRA DE PROGRESSO E TEXTO CENTRALIZADO DENTRO DELA -->
            <div class="progress-bar">
                <div id="perseveranceProgressBar" class="progress"></div>
                <div id="perseverancePercentage" class="progress-percentage-left">
                    Dias: <span id="currentDaysText">0</span> / <span id="recordDaysText">0</span>
                    <span id="recordCrown" class="record-crown">üëë</span>
                </div>
            </div>
        </div>
    </div>
    <hr id="sectionSeparator" class="section-separator" style="display:none;">


    <!-- Se√ß√£o de Adicionar Novo Alvo -->
    <div id="appContent" class="form-section" style="display:none;">
        <h2>Adicionar Novo Alvo de Ora√ß√£o</h2>
        <form id="prayerForm">
            <label for="title">T√≠tulo do Alvo:</label>
            <input type="text" id="title" required>

            <label for="details">Detalhes:</label>
            <textarea id="details"></textarea>

            <label for="date">Data de Cria√ß√£o:</label>
            <input type="date" id="date" required>

            <label for="categorySelect">Categoria (Opcional):</label>
            <select id="categorySelect">
                <option value="">-- Selecione uma Categoria --</option>
                <option value="Fam√≠lia">Fam√≠lia</option>
                <option value="Pessoal">Pessoal</option>
                <option value="Igreja">Igreja</option>
                <option value="Trabalho">Trabalho</option>
                <option value="Sonho">Sonho</option>
                <option value="Prof√©tico">Prof√©tico</option>
                <option value="Promessas">Promessas</option>
                <option value="Esposa">Esposa</option>
                <option value="Filhas">Filhas</option>
                <option value="Minist√©rio de Intercess√£o">Minist√©rio de Intercess√£o</option>
                <option value="Outros">Outros</option>
            </select>

            <div class="checkbox-container">
                <input type="checkbox" id="hasDeadline">
                <label for="hasDeadline">Definir Prazo de Validade?</label>
            </div>

            <div id="deadlineContainer" style="display:none;">
                <label for="deadlineDate">Prazo de Validade:</label>
                <input type="date" id="deadlineDate">
            </div>

            <button type="submit" class="btn submit-btn">Adicionar Alvo</button>
        </form>
    </div>

    <!-- Se√ß√£o de Listagem de Alvos Ativos -->
    <div id="mainPanel" class="targets-section" style="display:none;">
        <h2>Meus Alvos Ativos</h2>
        <input type="text" id="searchMainInput" class="search-input" placeholder="Buscar em alvos ativos...">
        <hr class="search-separator">
        <div class="filter-controls">
            <div class="filter-container">
                <input type="checkbox" id="showDeadlineOnly">
                <label for="showDeadlineOnly">Mostrar Apenas com Prazo</label>
            </div>
            <div class="filter-container">
                <input type="checkbox" id="showExpiredOnlyMain">
                <label for="showExpiredOnlyMain">Mostrar Apenas Vencidos</label>
            </div>
        </div>
        <hr class="filter-separator">
        <div id="targetList">
            <p>Nenhum alvo de ora√ß√£o ativo.</p>
        </div>
        <div id="pagination-mainPanel" class="pagination"></div>
    </div>

    <!-- Se√ß√£o de Listagem de Alvos Arquivados -->
    <div id="archivedPanel" class="targets-section" style="display:none;">
        <h2>Alvos Arquivados</h2>
        <input type="text" id="searchArchivedInput" class="search-input" placeholder="Buscar em alvos arquivados...">
        <hr class="search-separator">
        <div id="archivedList">
            <p>Nenhum alvo arquivado.</p>
        </div>
        <div id="pagination-archivedPanel" class="pagination"></div>
    </div>

    <!-- Se√ß√£o de Listagem de Alvos Respondidos -->
    <div id="resolvedPanel" class="targets-section" style="display:none;">
        <h2>Alvos Respondidos</h2>
        <input type="text" id="searchResolvedInput" class="search-input" placeholder="Buscar em alvos respondidos...">
        <hr class="search-separator">
        <div id="resolvedList">
            <p>Nenhum alvo respondido.</p>
        </div>
        <div id="pagination-resolvedPanel" class="pagination"></div>
    </div>


    <!-- ==== MODAIS ==== -->

    <!-- Modal para Selecionar Per√≠odo de Datas (Visualizar Respondidos) -->
    <div id="dateRangeModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeDateRangeModal">√ó</span>
            <h2>Selecionar Per√≠odo</h2>
            <label for="startDate">Data de In√≠cio:</label>
            <input type="date" id="startDate">
            <label for="endDate">Data de Fim:</label>
            <input type="date" id="endDate">
            <div class="modal-buttons">
                <button id="generateResolvedView" class="btn modal-action-btn">Gerar Visualiza√ß√£o</button>
                <button id="cancelDateRange" class="btn modal-cancel-btn">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar Alvo Manualmente √† Lista do Dia -->
    <div id="manualTargetModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeManualTargetModal">√ó</span>
            <h2>Adicionar Alvo √† Lista do Dia</h2>
            <p>Busque um alvo ativo para adicionar √† sua lista de ora√ß√£o de hoje.</p>
            <input type="text" id="manualTargetSearchInput" placeholder="Buscar por t√≠tulo, detalhe ou categoria...">
            <div id="manualTargetSearchResults" class="manual-search-results">
                <p>Digite algo para buscar...</p>
            </div>
            <!-- Bot√µes de a√ß√£o podem ser removidos se a sele√ß√£o for direta no item -->
        </div>
    </div>

    <!-- Modal para Sele√ß√£o de Categorias (Visualiza√ß√£o por Categoria) -->
    <div id="categorySelectionModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeCategoryModal">√ó</span>
            <h2>Selecionar Categorias para Visualiza√ß√£o</h2>
            <p>Escolha uma ou mais categorias para gerar uma visualiza√ß√£o dos seus alvos ativos.</p>
            <div id="categoryCheckboxesContainer" class="category-checkboxes-container">
                <!-- Checkboxes ser√£o populados pelo JavaScript -->
            </div>
            <div class="modal-buttons">
                <button id="confirmCategoryView" class="btn modal-action-btn">Gerar Visualiza√ß√£o</button>
                <button id="cancelCategoryView" class="btn modal-cancel-btn">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Popup de Conclus√£o dos Alvos Di√°rios -->
    <div id="completionPopup" class="popup">
        <div class="popup-content">
            <h3>Parab√©ns!</h3>
            <p>Voc√™ orou por todos os alvos de hoje.</p>
            <p id="popupVerse" class="popup-verse"></p>
            <button id="closePopup" class="btn">Fechar</button>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
