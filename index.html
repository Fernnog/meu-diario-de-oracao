<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alvos de Oração</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap">
    <link rel="stylesheet" href="styles.css"> <!-- Certifique-se que styles.css inclui os novos estilos -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
</head>
<body>
 <!-- ==== INÍCIO SEÇÃO - CABEÇALHO ==== -->
<div class="top-bar">
    <!-- Conteúdo do top-bar, se houver -->
</div>
<div class="logo-container">
    <img src="logo.png" alt="Logo" class="logo">
</div>
<div class="main-title">
    <h1>Meus Alvos de Oração</h1>
</div>
<!-- ==== FIM SEÇÃO - CABEÇALHO ==== -->

    <!-- ==== INÍCIO SEÇÃO - AUTENTICAÇÃO ==== -->
    <div id="authSection" class="auth-section">
        <!-- Formulário de E-mail/Senha -->
        <div class="auth-form" id="emailPasswordAuthForm">
            <input type="email" id="email" placeholder="Seu e-mail" required>
            <input type="password" id="password" placeholder="Sua senha" required>
            <div class="auth-buttons">
                <button id="btnEmailSignUp" class="btn auth-btn">Cadastrar</button>
                <button id="btnEmailSignIn" class="btn auth-btn">Entrar</button>
            </div>
            <div class="forgot-password-container">
                <button id="btnForgotPassword" class="forgot-password-btn">Esqueci minha senha</button>
            </div>
            <div id="passwordResetMessage" class="password-reset-message" style="display:none;"></div>
        </div>

        <!-- Status e Botão Sair -->
        <div class="auth-status-container">
            <p id="authStatus" class="auth-status">Nenhum usuário autenticado</p>
            <button id="btnLogout" class="btn auth-btn" style="display:none;">Sair</button>
        </div>
    </div>
    <!-- ==== FIM SEÇÃO - AUTENTICAÇÃO ==== -->

     <!-- ==== INÍCIO SEÇÃO - MENU ==== -->
    <hr class="menu-separator">
    <div class="main-menu" id="mainMenu" style="display: none;"> <!-- Oculto até login -->
       <button id="backToMainButton" class="btn">Página Inicial</button>
       <button id="addNewTargetButton" class="btn">Novo</button>
       <button id="viewAllTargetsButton" class="btn">Ver Todos os Alvos</button>
       <button id="viewArchivedButton" class="btn archived-resolved">Ver Arquivados</button>
       <button id="viewResolvedButton" class="btn archived-resolved">Ver Respondidos</button>
    </div>
    <hr class="menu-separator dark" id="menuSeparatorDark" style="display: none;">
    <div class="main-menu" id="mainMenuActions" style="display: none;"> <!-- Menu de Ações, oculto até login -->
        <button id="generateViewButton" class="btn generate-view action-btn">Gerar Visualização Geral</button>
        <button id="viewResolvedViewButton" class="btn generate-view action-btn">Visualizar Respondidos</button>
        <button id="viewReportButton" class="btn action-btn">Perseverança</button> <!-- Link para orei.html -->
    </div>
    <hr class="menu-separator" id="menuSeparatorBottom" style="display: none;">
    <!-- ==== FIM SEÇÃO - MENU ==== -->
    
    <!-- ==== INÍCIO SEÇÃO - QUADRO DIAS DA SEMANA PERSEVERANÇA ==== -->
    <div class="weekly-perseverance-chart" id="weeklyPerseveranceChart" style="display: none;">
        <div class="weekly-header">
            <h3>Sua Semana de Perseverança</h3>
        </div>
        <div class="days-container">
            <div class="day"><span class="day-name">Dom</span><span class="day-tick" id="day-0"></span></div>
            <div class="day"><span class="day-name">Seg</span><span class="day-tick" id="day-1"></span></div>
            <div class="day"><span class="day-name">Ter</span><span class="day-tick" id="day-2"></span></div>
            <div class="day"><span class="day-name">Qua</span><span class="day-tick" id="day-3"></span></div>
            <div class="day"><span class="day-name">Qui</span><span class="day-tick" id="day-4"></span></div>
            <div class="day"><span class="day-name">Sex</span><span class="day-tick" id="day-5"></span></div>
            <div class="day"><span class="day-name">Sáb</span><span class="day-tick" id="day-6"></span></div>
        </div>
    </div>
    <!-- ==== FIM SEÇÃO - QUADRO DIAS DA SEMANA PERSEVERANÇA ==== -->

    <!-- ==== INÍCIO SEÇÃO - BARRA DE PROGRESSO PERSEVERANÇA ==== -->
    <div class="perseverance-section" id="perseveranceSection" style="display: none;">
        <div class="perseverance-header">
            <h2>Perseverança na Intercessão</h2>
            <div class="perseverance-bar-container">
                <div class="progress-bar">
                    <span class="progress-percentage" id="perseverancePercentage">0 dias</span>
                    <div class="progress" id="perseveranceProgressBar" style="width: 0%;"></div>
                    <span class="progress-target-days-right">/30 dias</span>
                </div>
                <button id="confirmPerseveranceButton" class="btn perseverance-btn">Confirmar Perseverança</button>
            </div>
        </div>
    </div>
    <!-- ==== FIM SEÇÃO - BARRA DE PROGRESSO PERSEVERANÇA ==== -->

    <!-- ==== INÍCIO SEÇÃO - FORMULÁRIO DE CADASTRO ==== -->
    <div class="form-section" id="appContent" style="display: none;"> <!-- HIDDEN BY DEFAULT -->
        <h2>Cadastrar Novo Alvo de Oração</h2>
        <form id="prayerForm">
            <label for="title">Título:</label>
            <input type="text" id="title" placeholder="Ex.: Saúde da Família" required>
            <label for="details">Observações:</label>
            <textarea id="details" placeholder="Escreva aqui os detalhes do pedido..."></textarea>
            <label for="date">Data:</label>
            <input type="date" id="date" required>

            <!-- Checkbox e Label para prazo de validade -->
             <div class="filter-container" style="margin-top: 15px;"> <!-- Container para alinhar checkbox e label -->
                 <input type="checkbox" id="hasDeadline" name="hasDeadline">
                 <label for="hasDeadline">Este alvo tem prazo de validade?</label>
             </div>

            <!-- Campo de data para o prazo de validade (inicialmente oculto) -->
            <div id="deadlineContainer" style="display: none; margin-top: 5px;">
                <label for="deadlineDate">Prazo de Validade:</label>
                <input type="date" id="deadlineDate">
            </div>

            <button type="submit" class="btn" style="margin-top: 20px;">Adicionar Alvo</button>
        </form>
    </div>
    <!-- ==== FIM SEÇÃO - FORMULÁRIO DE CADASTRO ==== -->

    <hr class="section-separator" id="sectionSeparator" style="display: none;">

    <!-- ==== INÍCIO SEÇÃO - ALVOS DO DIA ==== -->
    <div class="daily-section" id="dailySection" style="display: none;">
        <h2>
            Alvos de oração do dia
            <div class="daily-buttons-container">
                <button id="refreshDaily" class="btn">Atualizar Alvos do Dia</button>
                <button id="copyDaily" class="btn">Copiar Alvos do Dia</button>
                <button id="viewDaily" class="btn daily-view">Visualizar Alvos do Dia</button>
            </div>
        </h2>
        <div id="dailyVerses" class="daily-verses">Carregando versículo...</div>

        <!-- === NOVA SEÇÃO DE BUSCA MANUAL === -->
        <div class="manual-target-search-section">
             <p>
                 Quer orar por um alvo específico hoje? Busque e adicione-o abaixo.
                 <br>(Isso não afeta a seleção automática dos próximos dias).
             </p>
             <input type="text" id="searchManualTargetInput" placeholder="Buscar alvo para adicionar hoje..." class="search-input">
             <div id="manualTargetResults">
                 <!-- Resultados da busca aparecerão aqui -->
                 <p style="text-align: center; color: #aaa; font-size: 0.85em;">Digite ao menos 2 letras...</p>
             </div>
        </div>
        <!-- === FIM NOVA SEÇÃO DE BUSCA MANUAL === -->

        <div id="dailyTargets">
             <p>Carregando alvos do dia...</p> <!-- Placeholder inicial -->
        </div>

        <!-- Popup de Conclusão -->
        <div id="completionPopup" class="popup" style="display: none;">
            <div class="popup-content">
                <p>Objetivo de oração diário cumprido com sucesso!</p>
                <p id="popupVerse" class="popup-verse">“Muito pode, por sua eficácia, a súplica do justo (Tg 5:16).”</p>
                <button id="closePopup" class="btn">Fechar</button>
            </div>
        </div>
    </div>
    <!-- ==== FIM SEÇÃO - ALVOS DO DIA ==== -->

  <!-- ==== INÍCIO SEÇÃO - PAINÉIS DE ALVOS (Listas Principais) ==== -->
   <!-- Painel Principal com Alvos Ativos -->
    <div class="targets-section" id="mainPanel" style="display: none;">
        <h2>Alvos de Oração Ativos</h2>
        <hr class="title-separator">
        <input type="text" id="searchMain" placeholder="Pesquisar em títulos, detalhes ou observações..." class="search-input">
        <hr class="search-separator">
        <div class="filter-container">
            <input type="checkbox" id="showDeadlineOnly" name="showDeadlineOnly">
            <label for="showDeadlineOnly">Mostrar apenas com prazo</label>
        </div>
        <div class="filter-container">
            <input type="checkbox" id="showExpiredOnlyMain" name="showExpiredOnlyMain">
            <label for="showExpiredOnlyMain">Mostrar apenas com prazo vencido</label>
        </div>
        <hr class="filter-separator">
        <div id="targetList">
             <p>Carregando alvos...</p>
        </div>
        <div id="pagination-mainPanel" class="pagination"></div>
    </div>

    <!-- Painel para Alvos Arquivados -->
    <div class="targets-section" id="archivedPanel" style="display: none;">
        <h2>Alvos Arquivados</h2>
        <hr class="title-separator">
        <input type="text" id="searchArchived" placeholder="Pesquisar em títulos, detalhes ou observações..." class="search-input">
        <hr class="search-separator">
        <div id="archivedList">
             <p>Carregando alvos arquivados...</p>
        </div>
        <div id="pagination-archivedPanel" class="pagination"></div>
    </div>

    <!-- Painel para Alvos Respondidos -->
    <div class="targets-section" id="resolvedPanel" style="display: none;">
        <h2>Alvos Respondidos</h2>
        <hr class="title-separator">
        <input type="text" id="searchResolved" placeholder="Pesquisar em títulos, detalhes ou observações..." class="search-input">
        <hr class="search-separator">
        <div id="resolvedList">
             <p>Carregando alvos respondidos...</p>
        </div>
        <div id="pagination-resolvedPanel" class="pagination"></div>
    </div>

    <!-- Painel para Alvos com Prazo de Validade (Removido/Oculto na lógica atual, mas mantido no HTML se necessário) -->
    <!--
    <div class="targets-section" id="deadlinePanel" style="display: none;">
        <h2>Alvos com Prazo de Validade</h2>
        <hr class="title-separator">
        <input type="text" id="searchDeadline" placeholder="Pesquisar alvos..." class="search-input">
        <hr class="search-separator">
        <div class="filter-container">
            <input type="checkbox" id="showExpiredOnly" name="showExpiredOnly">
            <label for="showExpiredOnly">Vencidos</label>
        </div>
        <hr class="filter-separator">
        <div id="deadlineList"></div>
        <div id="pagination-deadlinePanel" class="pagination"></div>
    </div>
    -->
<!-- ==== FIM SEÇÃO - PAINÉIS DE ALVOS ==== -->

   <!-- ==== INÍCIO SEÇÃO - MODAIS ==== -->
    <!-- Modal para Seleção de Período (para Visualizar Respondidos) -->
    <div id="dateRangeModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="closeDateRangeModal">×</span>
            <h2>Selecionar Período para Visualizar Respondidos</h2>
            <label for="startDate">Data de Início:</label>
            <input type="date" id="startDate">
            <label for="endDate">Data de Fim:</label>
            <input type="date" id="endDate">
            <div class="modal-buttons">
                 <button id="generateResolvedView" class="btn">Gerar Visualização</button>
                 <button id="cancelDateRange" class="btn">Cancelar</button>
            </div>
        </div>
    </div>
    <!-- ==== FIM SEÇÃO - MODAIS ==== -->

    <!-- Importa o script principal -->
    <script type="module" src="script.js"></script>
</body>
</html>
